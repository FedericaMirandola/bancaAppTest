# --- Configurazione Database per i Test (H2 In-Memory) ---
# Usiamo H2 in-memory per test rapidi e isolati.
# Assicurati di avere la dipendenza 'quarkus-jdbc-h2' e 'h2' con scope 'test' nel tuo pom.xml.
#quarkus.datasource.db-kind=h2
#quarkus.datasource.jdbc.url=jdbc:h2:mem:banktest;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
#quarkus.datasource.username=sa
#quarkus.datasource.password=

#configurazione DB postgres
quarkus.datasource.db-kind=postgresql
quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5437/bancaDB
quarkus.datasource.username=user
quarkus.datasource.password=password

# --- Gestione Schema con Hibernate ORM per i Test ---
# 'drop-and-create' pulisce e ricrea lo schema a ogni avvio dei test,
# garantendo un ambiente pulito e riproducibile per ogni esecuzione.
#quarkus.hibernate-orm.database.generation=drop-and-create

# --- Flyway (Disabilitato per i Test) ---
# Flyway è tipicamente disabilitato nei test quando Hibernate gestisce lo schema
# tramite 'drop-and-create' per evitare conflitti o complessità inutili.
quarkus.flyway.baseline-on-migrate=true
quarkus.flyway.migrate-at-start=true

# --- Configurazioni per Scheduler (se usate nei test) ---
# Mantieni queste impostazioni se i tuoi test unitari/di integrazione dipendono
# dal comportamento di questi scheduler. Altrimenti, potresti commentarli.
movimenti.scaricamento.cron=0 0 2 * * ?
scheduler.daysback=1

# --- Configurazioni Client REST (Mock/Fake per i Test) ---
# È buona pratica usare URL mock/fake per i client REST nei test per isolare
# il tuo codice dalle dipendenze esterne. Le tue configurazioni attuali sono perfette.

# Esempio: Disabilita URL reali e usa un URL mock per 'credem-api'
# quarkus.rest-client.credem-api.url=https://sandbox.credem.it/psd2/v1
credem-api/mp-rest/url=http://localhost:8080

# Altre configurazioni mock per Credem e CBI
credem.account-id=3
credem.psu-id=PR-00000000-001-00013384-IH
use.fake.credem=true
transaction.source=mock

cbi.client-id=my-mock-client-id
cbi.client-secret=my-mock-client-secret
cbi.auth-url=http://localhost:8080/oauth/token
cbi.token=fake-mock-bearer-token
cbi-auth/mp-rest/url=http://localhost:8080